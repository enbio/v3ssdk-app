<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Serial Port: /my_workshop/serialport_linux/src/debug-msg.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.8 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="globals.html">File&nbsp;Members</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>/my_workshop/serialport_linux/src/debug-msg.h</h1><a href="debug-msg_8h.html">Go to the documentation of this file.</a><pre class="fragment"><div>00001 
00029 <span class="preprocessor">#ifndef _DEBUG_MSG_H</span>
00030 <span class="preprocessor"></span><span class="preprocessor">#define _DEBUG_MSG_H</span>
00031 <span class="preprocessor"></span>
00032 <span class="preprocessor">#include &lt;stdio.h&gt;</span>      <span class="comment">/* perror() */</span>
00033 <span class="preprocessor">#include &lt;string.h&gt;</span>     <span class="comment">/* strerror() */</span>
00034 <span class="preprocessor">#include &lt;errno.h&gt;</span>      <span class="comment">/* errno */</span>
00035 
00036 <span class="comment">/***</span>
00037 <span class="comment"> * Print the error msg is one thing</span>
00038 <span class="comment"> * but print the msg is another!!</span>
00039 <span class="comment"> */</span>
00040 
<a name="l00046"></a><a class="code" href="debug-msg_8h.html#a0">00046</a> <span class="preprocessor">#define error_exit(error)       \</span>
00047 <span class="preprocessor">    do{                                         \</span>
00048 <span class="preprocessor">        fprintf(stderr, "%s\n", error);         \</span>
00049 <span class="preprocessor">        exit(0);                                \</span>
00050 <span class="preprocessor">    } while(0)</span>
00051 <span class="preprocessor"></span>
<a name="l00056"></a><a class="code" href="debug-msg_8h.html#a1">00056</a> <span class="preprocessor">#define error_ret(error)                          \</span>
00057 <span class="preprocessor">    do{                                           \</span>
00058 <span class="preprocessor">        fprintf(stderr, "%s\n", error);           \</span>
00059 <span class="preprocessor">        return -1;                                \</span>
00060 <span class="preprocessor">    } while(0)</span>
00061 <span class="preprocessor"></span>
<a name="l00067"></a><a class="code" href="debug-msg_8h.html#a2">00067</a> <span class="preprocessor">#define unix_error_exit(error)                  \</span>
00068 <span class="preprocessor">    do{                                         \</span>
00069 <span class="preprocessor">        fprintf(stderr, "%s Info[%d]:%s\n",     \</span>
00070 <span class="preprocessor">                error, errno, strerror(errno)); \</span>
00071 <span class="preprocessor">        exit(1);                                \</span>
00072 <span class="preprocessor">    } while(0)</span>
00073 <span class="preprocessor"></span>
<a name="l00079"></a><a class="code" href="debug-msg_8h.html#a3">00079</a> <span class="preprocessor">#define unix_error_ret(error)                   \</span>
00080 <span class="preprocessor">    do{                                         \</span>
00081 <span class="preprocessor">        fprintf(stderr, "%s Info[%d]:%s\n",     \</span>
00082 <span class="preprocessor">                error, errno, strerror(errno)); \</span>
00083 <span class="preprocessor">        return -1;                              \</span>
00084 <span class="preprocessor">    } while(0)</span>
00085 <span class="preprocessor"></span>
00086 <span class="comment">/* error handle ,detail version */</span>
00087 <span class="comment">/* it can show the file,function and the line */</span>
<a name="l00096"></a><a class="code" href="debug-msg_8h.html#a4">00096</a> <span class="preprocessor">#define unix_print_error(error)                                 \</span>
00097 <span class="preprocessor">    do {                                                        \</span>
00098 <span class="preprocessor">        fprintf(stderr, "Oh God!\nFile:%s Line:%d Function:%s:\n",  \</span>
00099 <span class="preprocessor">                __FILE__, __LINE__, __func__);                      \</span>
00100 <span class="preprocessor">        perror(error);                                              \</span>
00101 <span class="preprocessor">        exit(0);                                                    \</span>
00102 <span class="preprocessor">    } while(0)</span>
00103 <span class="preprocessor"></span>
00104 <span class="comment">/* DEBUG=0  will show nothing */</span>
00105 <span class="preprocessor">#ifndef DEBUG</span>
<a name="l00106"></a><a class="code" href="debug-msg_8h.html#a5">00106</a> <span class="preprocessor"></span><span class="preprocessor">#define DEBUG   1               </span>
00107 <span class="preprocessor">#endif</span>
00108 <span class="preprocessor"></span>
00114 <span class="preprocessor">#ifdef DEBUG</span>
<a name="l00115"></a><a class="code" href="debug-msg_8h.html#a6">00115</a> <span class="preprocessor"></span><span class="preprocessor">#define debug_msg(fmt, ...)     \</span>
00116 <span class="preprocessor">    fprintf(stdout, fmt, ##__VA_ARGS__)</span>
00117 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00118 <span class="preprocessor"></span><span class="preprocessor">#define debug_msg(fmt,...)</span>
00119 <span class="preprocessor"></span><span class="preprocessor">#endif   </span><span class="comment">/* DEBUG */</span>
00120 
00121 <span class="preprocessor">#ifndef TRACE</span>
<a name="l00122"></a><a class="code" href="debug-msg_8h.html#a7">00122</a> <span class="preprocessor"></span><span class="preprocessor">#define TRACE   1               </span>
00123 <span class="preprocessor">#endif</span>
00124 <span class="preprocessor"></span>
00130 <span class="preprocessor">#ifdef TRACE</span>
<a name="l00131"></a><a class="code" href="debug-msg_8h.html#a8">00131</a> <span class="preprocessor"></span><span class="preprocessor">#define debug_trace(trace)      \</span>
00132 <span class="preprocessor">    fprintf(stdout, "%s File:%s Line:%d Func:%s.\n",   \</span>
00133 <span class="preprocessor">            trace, __FILE__, __LINE__, __func__)</span>
00134 <span class="preprocessor"></span><span class="preprocessor">#else</span>
00135 <span class="preprocessor"></span><span class="preprocessor">#define debug_trace(trace)</span>
00136 <span class="preprocessor"></span><span class="preprocessor">#endif</span>
00137 <span class="preprocessor"></span>
00138 <span class="preprocessor">#endif   </span><span class="comment">/* _DEBUG_MSG_H */</span>
</div></pre><hr size="1"><address style="align: right;"><small>Generated on Mon Apr 8 13:29:24 2013 for Serial Port by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 ></a> 1.3.8 </small></address>
</body>
</html>
