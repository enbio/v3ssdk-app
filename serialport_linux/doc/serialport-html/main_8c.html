<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>Serial Port: X:/serialport_linux/src/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Serial Port
   &#160;<span id="projectnumber">1.1 beta</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>A simple test of serial port writing data to the port.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;stdlib.h&gt;</code><br/>
<code>#include &lt;string.h&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;pthread.h&gt;</code><br/>
<code>#include &lt;signal.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="serialport_8h_source.html">serialport.h</a>&quot;</code><br/>
<code>#include &quot;error-log.h&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a57756dafee7185f2a9eb66b9dcf300f4"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a57756dafee7185f2a9eb66b9dcf300f4">write_port_thread</a> (void *argc)</td></tr>
<tr class="separator:a57756dafee7185f2a9eb66b9dcf300f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeec35cd1cb53e28a1abd9bcd20ddcd41"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#aeec35cd1cb53e28a1abd9bcd20ddcd41">read_port_thread</a> (void *argc)</td></tr>
<tr class="separator:aeec35cd1cb53e28a1abd9bcd20ddcd41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a159ac3053c7c8722e4db2060e3cf89af"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a159ac3053c7c8722e4db2060e3cf89af">sig_handle</a> (int sig_num)</td></tr>
<tr class="separator:a159ac3053c7c8722e4db2060e3cf89af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f13d4eed0917db6dfa9ce3fbabd66d2"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a3f13d4eed0917db6dfa9ce3fbabd66d2">exit_thread</a> (void *argc)</td></tr>
<tr class="separator:a3f13d4eed0917db6dfa9ce3fbabd66d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a215898a6f1fb951286d04533036151a1"><td class="memItemLeft" align="right" valign="top">pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a215898a6f1fb951286d04533036151a1">write_tid</a></td></tr>
<tr class="separator:a215898a6f1fb951286d04533036151a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9441ca6a207c99e2ec493f5a3092c807"><td class="memItemLeft" align="right" valign="top">pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a9441ca6a207c99e2ec493f5a3092c807">read_tid</a></td></tr>
<tr class="separator:a9441ca6a207c99e2ec493f5a3092c807"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c9e209e425b61ef0811012c41b4e57"><td class="memItemLeft" align="right" valign="top">pthread_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#ad7c9e209e425b61ef0811012c41b4e57">exit_tid</a></td></tr>
<tr class="separator:ad7c9e209e425b61ef0811012c41b4e57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fe855c208bc17a51a4d34fefdb2d5b1"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a1fe855c208bc17a51a4d34fefdb2d5b1">buf</a> = &quot;Are you going to die? To be or not to be, that is the question.\r\n&quot;</td></tr>
<tr class="separator:a1fe855c208bc17a51a4d34fefdb2d5b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b8a29e85fb6e7c862a055ae3d97f262"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8c.html#a2b8a29e85fb6e7c862a055ae3d97f262">tmp</a> [512]</td></tr>
<tr class="separator:a2b8a29e85fb6e7c862a055ae3d97f262"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A simple test of serial port writing data to the port. </p>
<pre class="fragment">                 Copyleft (C) 2010  Late Lee
   This program is tested on LINUX PLATFORM, WITH GCC 4.x.
   The program is distributed in the hope that it will be
   useful, but WITHOUT ANY WARRANTY. Please feel free to 
   use the program, and I feel free to ignore the related
   issues. Any questions or suggestions, or bugs, please 
   contact me at
   &lt;$ echo -n "aHR0cDovL3d3dy5sYXRlbGVlLm9yZwo=" | base64 -d&gt;
   or e-mail to 
   &lt;$ echo -n "bGF0ZWxlZUAxNjMuY29tCg==" | base64 -d&gt;
   if you want to do this.
</pre><dl class="section author"><dt>Author</dt><dd>Late Lee </dd></dl>
<dl class="section date"><dt>Date</dt><dd>Mon Jan 10 2011</dd></dl>
<dl class="test"><dt><b><a class="el" href="test.html#_test000002">Test:</a></b></dt><dd>To compile the program, type <code> make </code>, then it will generate the executable binary <code>a.out</code>. To run it, type <code> ./a.out</code>.Make sure you have the permission to open the serial port.<br/>
 You can start a ternimal and type <code>minicom</code>(also make sure you can open the device). When everything is OK, you can see the data in minicom using the same port if you connect pin 2 &amp; pin 3 of the port (the male connector, see the picture below)(but I don't know the reason, isn't it blocked?).<br/>
 If you want to stop the program, just use 'Ctrl+c' or 'q'. <br/>
 In default, the program open the device '/dev/ttyUSB0'.<br/>
 Here are snapshots of the program: </dd></dl>
<div class="image">
<img src="serial-write.jpg" alt="serial-write.jpg"/>
<div class="caption">
Writing to the port...</div></div>
<div class="image">
<img src="serial-read-minicom.jpg" alt="serial-read-minicom.jpg"/>
<div class="caption">
Reading the data in minicom...</div></div>
<div class="image">
<img src="send_revc_self.jpg" alt="send_revc_self.jpg"/>
<div class="caption">
One thread send, one thread read.</div></div>
<p> <br/>
 And here comes the serial port connector: </p>
<div class="image">
<img src="com-male.jpg" alt="com-male.jpg"/>
<div class="caption">
A 9-pin male D-Sub connector(*)</div></div>
<div class="image">
<img src="com-female.jpg" alt="com-female.jpg"/>
<div class="caption">
A 9-pin female D-Sub connector</div></div>
<p> (*)We use this connector in the test. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a3f13d4eed0917db6dfa9ce3fbabd66d2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* exit_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>exit_thread - Thread that exit the program when 'q' pressed</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>: Here means the port(specified by the fd). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>main - main function </p>

</div>
</div>
<a class="anchor" id="aeec35cd1cb53e28a1abd9bcd20ddcd41"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* read_port_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>read_port_thread - Thread that reads data from the port</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>: Here means the port(specified by the fd). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a159ac3053c7c8722e4db2060e3cf89af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void sig_handle </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sig_num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>sig_handle - Handle the INT signal.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sig_num</td><td>: The signal. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function is not used. </dd></dl>

</div>
</div>
<a class="anchor" id="a57756dafee7185f2a9eb66b9dcf300f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* write_port_thread </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>argc</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>write_port_thread - A thread that writes data to the port</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">argc</td><td>: Here means the port(specified by the fd).</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is only a test, not the <em>real</em> one. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a1fe855c208bc17a51a4d34fefdb2d5b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* buf = &quot;Are you going to die? To be or not to be, that is the question.\r\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>The data we write to the port. </p>

</div>
</div>
<a class="anchor" id="ad7c9e209e425b61ef0811012c41b4e57"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t exit_tid</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>exit thread </p>

</div>
</div>
<a class="anchor" id="a9441ca6a207c99e2ec493f5a3092c807"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t read_tid</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>read thread </p>

</div>
</div>
<a class="anchor" id="a2b8a29e85fb6e7c862a055ae3d97f262"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char tmp[512]</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>data we receive </p>

</div>
</div>
<a class="anchor" id="a215898a6f1fb951286d04533036151a1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pthread_t write_tid</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>write thread </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Apr 8 2013 13:35:24 for Serial Port by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
